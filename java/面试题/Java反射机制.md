# Java反射机制

## 反射机制定义

反射的概念是由Smith在1982年首次提出的，主要是指程序可以访问、检测和修改其本身状态或行为的一种能力。

在Java环境中，反射机制允许程序在执行时获取某个类自身的定义信息，例如熟悉和方法等也可以实现动态创建类的对象、变更属性的内容或执行特定的方法的功能。从而使Java具有动态语言的特性，增强了程序的灵活性和可移植性。

## 反射机制的作用

Java反射机制主要用于实现以下功能。

（1）在运行时判断任意一个对象所属的类型。

（2）在运行时构造任意一个类的对象。

（3）在运行时判断任意一个类所具有的成员变量和方法。

（4）在运行时调用任意一个对象的方法，甚至可以调用private方法。

注意：上述功能都是在运行时环境中，而不是在编译时环境中。

## Java反射机制API

实现Java反射机制的API在Java.lang.reflect包下，具有以下几点。

（1）Class类：代表一个类。

（2）Filed类：代表类的成员变量。

（3）Method类：代表类的方法。

（4）Constructor类：代表类的构造方法。

（5）Array类：提供了动态创建数组及访问数组元素的静态方法。该类中的所有方法都是静态的。


Java语言反射提供一种动态链接程序组件的多功能方法。它允许程序创建和控制任何类的对象， 
无需提前硬编码目标类。这些特性使得反射特别适用于创建以普通方式与对象协作的库。 
反射在性能方面会有一定的损耗，用于字段和方法接入时反射要远慢于直接写代码。如果它作为程序 
运行中相对很少涉及的部分将不会造成影响，因为即使测试最坏情况下的计时图显示的反射操作也只耗用几微秒。

## 性能问题

反射是一种强大的工具，但也存在一些不足。一个主要的缺点是对性能有影响。使用反射基本上是一种解释操作，我们可以告诉JVM，我们希望做什么并且它满足我们的要求。这类操作总是慢于只直接执行相同的操作。

使用反射的执行时间超过使用直接接入的1000倍以上。通过比较，IBM JVM可能稍好一些，但反射方法仍旧需要比其它方法长700倍以上的时间。任何JVM上其它两种方法之间时间方面无任何显著差异，但IBM JVM几乎比Sun JVM快一倍。最有可能的是这种差异反映了Sun Hot Spot JVM的专业优化，它在简单基准方面表现得很糟糕。反射性能是Sun开发1.4 JVM时关注的一个方面，它在反射方法调用结果中显示。在这类操作的性能方面，Sun